<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
  <title>Station 2 — Typisch Ost – typisch West?</title>
  <style>
    :root{
      --bg: #0e1117; --card: #12161f; --text: #e6edf3; --muted:#9aa7b2;
      --chip:#202634; --accent:#1f6f3d; --accent-press:#185833; --shadow:rgba(0,0,0,.35);
    }
    html,body{height:100%}
    body{margin:0; font:16px/1.6 system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif; color:var(--text); background:var(--bg)}
    .container{max-width:920px; margin:0 auto; padding:16px}
    header{position:sticky; top:0; z-index:5; backdrop-filter:saturate(140%) blur(8px); background: color-mix(in srgb, var(--bg) 80%, transparent); border-bottom:1px solid rgba(255,255,255,.06)}
    .hero{position:relative; background:linear-gradient(180deg, color-mix(in srgb, var(--card) 90%, transparent) 0%, transparent 100%); border-radius:20px; padding:22px 20px 18px; box-shadow:0 10px 30px var(--shadow) inset}
    .lang{position:absolute; right:12px; top:12px}
    .lang button{appearance:none; -webkit-tap-highlight-color:transparent; cursor:pointer; border:1px solid rgba(255,255,255,.08); background:var(--chip); color:#fff; padding:10px 14px; border-radius:999px; font-weight:800; letter-spacing:.5px; box-shadow:0 8px 18px rgba(0,0,0,.25); transition:transform .08s ease, box-shadow .2s ease}
    .lang button:active{transform:translateY(1px) scale(.98); box-shadow:0 4px 10px rgba(0,0,0,.35)}
    h1{margin:0; font-weight:900; letter-spacing:.2px; font-size:clamp(22px,4.2vw,34px)}
    .subtitle{margin-top:6px; color:var(--muted); font-weight:700; font-size:clamp(14px,2.3vw,18px)}

    /* Player */
    .player{margin:16px 0 6px; background:var(--card); border:1px solid rgba(255,255,255,.06); border-radius:16px; padding:14px; box-shadow:0 8px 24px rgba(0,0,0,.25)}
    .row{display:flex; align-items:center; gap:12px}
    .play{appearance:none; border:none; border-radius:999px; width:44px; height:44px; background:var(--accent); color:#fff; font-weight:900; font-size:16px; cursor:pointer; display:grid; place-items:center; box-shadow:0 10px 26px rgba(31,111,61,.35)}
    .play:active{background:var(--accent-press)}
    .times{min-width:78px; text-align:right; font-variant-numeric:tabular-nums; color:var(--muted)}
    .range{flex:1}
    input[type=range]{width:100%}

    main .text{margin-top:8px; font-size:18px}
    main .text p{margin:0 0 14px}
  </style>
</head>
<body>
  <header>
    <div class="container">
      <div class="hero">
        <div class="lang"><button id="langBtn" aria-label="Sprache umschalten">DE</button></div>
        <h1 id="title">Typisch Ost – typisch West?</h1>
        <div class="subtitle" id="subtitle">Station 2</div>
        <div class="player" aria-label="Audio-Player">
          <div class="row">
            <button class="play" id="playBtn" aria-label="Abspielen/Pause">▶</button>
            <div class="range"><input id="seek" type="range" min="0" max="100" value="0" step="1" aria-label="Positionsregler"></div>
            <div class="times"><span id="cur">0:00</span> / <span id="dur">0:00</span></div>
          </div>
        </div>
      </div>
    </div>
  </header>

  <main class="container">
    <article class="text" id="body"></article>
  </main>

  <audio id="audio" preload="none"></audio>

  <script>
    /* === Общая база аудио (единый банк файлов) === */
    const AUDIO_BASE = 'https://ausstellungmw.github.io/Frauen-im-geteilten-Deutschland/assets/audio/';
    const getAudioUrl = (lang, num) => `${AUDIO_BASE}${lang}/${num}.mp3`;

    // Тексты (исправлены артефакты кодировки по смыслу)
    const i18n = {
      de: {
        title: 'Typisch Ost – typisch West?',
        subtitle: 'Station 2',
        body: `Ich bin in den 1990er Jahren als Kind in einem Land ohne Mauer aufgewachsen. Die deutsche Teilung war Geschichte. Und doch begegnen einem immer wieder Klischees, die sich bis heute in den Köpfen vieler Menschen über Frauen in Ost- und Westdeutschland halten: Die Westfrau, die mal als Heimchen am Herd, mal als knallharte Karrierefrau beschrieben wird. Die Ostfrau, die im Kohlebergbau „ihren Mann“ steht. Die mal als tough und mal als Rabenmutter bezeichnet wird, weil sie die Kinder in die Krippe gibt. Die Westfrau, die gendert, und die Ostfrau, die damit nichts anzufangen weiß. Die Ostfrau, die als Verliererin der deutschen Einheit gilt … Die Liste der Zuschreibungen ist lang. Und obwohl sie sich teils grotesk widersprechen, zeugen sie doch alle von der Überzeugung, genau zu wissen, wie DIE Ostfrau und DIE Westfrau ticken. Vor allem eines scheint klar zu sein: Sie ticken alle gleich, aber im Vergleich zum jeweils anderen Teil Deutschlands ganz anders. Woher kommen diese Zuschreibungen? Und was ist an ihnen dran?`,
        code: 'DE',
        audioNum: 2,
        ariaPlay:'Abspielen', ariaPause:'Pause'
      },
      en: {
        title: 'Typically Eastern – Typically Western?',
        subtitle: 'Station 2',
        body: `I grew up in the 1990s as a child in a country with no Wall. The division of Germany was history. Yet one still encounters to this day clichés in the minds of many people about women in eastern and western Germany. The western woman is sometimes the mumsy housewife, sometimes the uncompromising career woman. Her eastern counterpart “mans up” in the coal mine and is tough, but is also called a neglectful mother because she drops her children off at the kindergarten every day. The western woman uses gender-neutral language; the eastern woman does not know where to start with all that. The eastern woman is the loser of German unification … The list of supposed characteristics is long and, although they sometimes contradict themselves, they all nevertheless claim to show exactly what makes the eastern woman and the western woman tick. Above all, one thing appears to be clear: all women behave in the same way, but completely differently to those in the other half of Germany. Where do these supposed characteristics come from? And what do they reveal?`,
        code: 'EN',
        audioNum: 2,
        ariaPlay:'Play', ariaPause:'Pause'
      }
    };

    const langKey='station2_lang';
    let lang = localStorage.getItem(langKey) || 'de';

    const titleEl = document.getElementById('title');
    const subtitleEl = document.getElementById('subtitle');
    const bodyEl = document.getElementById('body');
    const langBtn = document.getElementById('langBtn');

    // Простая верстка абзацев
    function setBodyText(text){
      bodyEl.innerHTML = '';
      text.split(/\n\s*\n|\n(?=\S)/).forEach(p=>{
        const el=document.createElement('p'); el.textContent=p.trim(); bodyEl.appendChild(el);
      });
    }

    // Аудио
    const audio = document.getElementById('audio');
    const playBtn = document.getElementById('playBtn');
    const seek = document.getElementById('seek');
    const cur = document.getElementById('cur');
    const dur = document.getElementById('dur');

    function toTime(s){ s = Math.max(0, s|0); const m=(s/60)|0, r=(s%60)|0; return `${m}:${r.toString().padStart(2,'0')}` }

    function loadAudio(){
      const t = i18n[lang];
      const folder = (lang === 'de') ? 'de' : 'en';
      audio.src = getAudioUrl(folder, t.audioNum); // напр.: .../assets/audio/de/2.mp3
      audio.load();
      seek.value = 0; seek.max = 100; cur.textContent='0:00'; dur.textContent='0:00';
      playBtn.textContent='▶'; playBtn.setAttribute('aria-label', t.ariaPlay);
    }

    playBtn.addEventListener('click', ()=>{
      if(audio.paused){ audio.play().catch(()=>{}); } else { audio.pause(); }
    });

    audio.addEventListener('play', ()=>{ playBtn.textContent='❚❚'; playBtn.setAttribute('aria-label', i18n[lang].ariaPause); });
    audio.addEventListener('pause', ()=>{ playBtn.textContent='▶'; playBtn.setAttribute('aria-label', i18n[lang].ariaPlay); });

    audio.addEventListener('loadedmetadata', ()=>{ dur.textContent = toTime(audio.duration||0); });
    audio.addEventListener('timeupdate', ()=>{
      if(audio.duration){ seek.max = Math.floor(audio.duration); seek.value = Math.floor(audio.currentTime); cur.textContent = toTime(audio.currentTime); }
    });

    seek.addEventListener('input', ()=>{ if(audio.duration){ audio.currentTime = +seek.value; }});

    function applyLang(){
      const t = i18n[lang];
      document.documentElement.lang = lang;
      titleEl.textContent = t.title; subtitleEl.textContent = t.subtitle; setBodyText(t.body);
      langBtn.textContent = t.code; loadAudio();
    }

    langBtn.addEventListener('click', ()=>{ lang = (lang==='de') ? 'en' : 'de'; localStorage.setItem(langKey, lang); applyLang(); });

    applyLang();
  </script>
</body>
</html>
